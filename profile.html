


<!-- //아이콘 변경부분- 현재 아이콘 받아오기&새로운 아이콘 업로드 , 플레이리스트 받아오는것 // 수정 필요-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <title>23OPEN Music Share</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Free HTML Templates" name="keywords">
    <meta content="Free HTML Templates" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet"> 

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="lib/lightbox/css/lightbox.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="./styles/frame-24.css"/>
    <link rel="stylesheet" href="./styles/frame-22.css"/>
    <link rel="stylesheet" href="./styles/frame-25.css"/>
</head>
<body data-spy="scroll" data-target=".navbar" data-offset="51">
  
    
    <div class="frame-24-XxD">
      <div class="frame-10-emw">
        <div class="auto-group-itut-kpy">
          <a href="index.html" class="frame-4-yBw"style="margin-top:20px">
            <img src="./assets/frame-4.png" alt="Description of the image" style="width: 100%; height: 100%;">
          </a>
          
          <img class="frame-3-4z5" src="./assets/frame-3.png"/>
        </div>
        <a href="main.html" class="frame-5-bz1">홈</a>
        <a href="friends.html" class="frame-6-tiD">친구</a>
        <a th:href="@{/main/user/update/{userid}(userid=${#authentication.name})}" class="frame-6-f6h">프로필</a>

        <div style="width: 100%;height:40%;align-items: flex-end;display:flex;justify-content:center;">
          <a href="listcreat.html" class="frame-4-yBw" style="width: 50px;; height:50px; border-radius: 5rem; background-color:#525252;bottom:40%;">
            <img src="img/+.png" style="width: 50px; height: 50px;border-radius: 5rem;border: solid 0.5rem rgb(255, 255, 255);">
          </a>
        </div>


      </div>
      <div class="frame-27-YAV">

        <div class="frame-47-SdB">
      <div class="frame-66-PHX" style="margin-top: 20px;">
        <img class="frame-8-7jK" src="./assets/frame-3.png"/>
        <div class="frame-62-SWh">
          <div style="width:80%;height:80%;display: flex;text-align:center;align-items:center;">
            <!-- 모달 버튼 -->
            <button onclick="openModal()" style="width:100%;height:100%;background-color: #525252;color:#fff;">아이콘 변경</button>

            <script>
              // 모달 열기
              function openModal() {
                var modal = document.getElementById('myModal');
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden'; // 스크롤 방지
              }

              // 모달 닫기
              function closeModal_Icon() {
                var modal = document.getElementById('myModal');
                modal.style.display = 'none';
                document.body.style.overflow = 'auto'; // 스크롤 다시 허용
                
              }

              // 백드롭 클릭 방지
              document.getElementById('myModal').addEventListener('click', function (event) {
                if (event.target === this) {
                  closeModal_Icon(); // 모달 백드롭 클릭 시 모달 닫기
                }
              });
            </script>
          </div>
  </div>


      </div>
      <div class="frame-67-wTT" style="width: 1300px;margin-top: 20px;align-items: flex-start;">
        <div class="frame-26-hBj" style="width: 1300px;align-items: flex-start;">
          <div class="frame-21-dbB" style="width:40%;">
            <div class="frame-22-A5K" style="width:100%;margin: 0.55rem 20rem 0.55rem 0rem;">내가 만든 플레이 리스트</div>
            <a href="main.html" class="frame-23-qBT">더보기</a>
          </div>
          
          <div class="auto-group-6mtk-VG1" id="my_playlist"></div>
          <script>
            const myPlaylists = [
            { title: "플리제목 1", img:"./assets/frame-4.png"},
            { title: "플리제목 2", img:""},
            { title: "플리제목 3", img:""},
            { title: "플리제목 4", img:""},
            { title: "플리제목 5", img:""},
            { title: "플리제목 6", img:""},
            { title: "플리제목 7", img:""},
            { title: "플리제목 8", img:""}
          ];
          const my_Playlist = document.getElementById("my_playlist");

          myPlaylists.forEach(({ title, img }) => {
            const myPlaylistHtml = `
            <a href="playlist.html" class="frame-16-DSu">
              <div class="frame-17-Nah" style="background-image:url(${img});">
              </div>
              <div class="frame-18-845" style="height:20%;margin-top:15px">
                <div class="frame-19-Ts3">${title}</div>
              </div>
            </a>
            `;
        
            // Append the generated HTML to the my playlist container
            my_playlist.innerHTML += myPlaylistHtml;
          });
        </script>

          
        </div>
        <div class="frame-63-mtH" style="width: 1300px;">
          <div class="frame-21-hmw">
            <div class="frame-22-dQh"style="width:100%;">공동 작업하는 플레이 리스트</div>
            <a href="main.html" class="frame-23-JFw">더보기</a>
          </div>
          <div class="auto-group-a2ym-az9" id="public_playlist"></div>



          <script>
            const publicPlaylists = [
            { title: "플리제목 1", img:"./assets/frame-4.png"},
            { title: "플리제목 2", img:""},
            { title: "플리제목 3", img:""},
            { title: "플리제목 4", img:""},
            { title: "플리제목 5", img:""},
            { title: "플리제목 6", img:""},
            { title: "플리제목 7", img:""},
            { title: "플리제목 8", img:""}
          ];
          const public_Playlist = document.getElementById("public_playlist");

          publicPlaylists.forEach(({ title, img }) => {
            const publicPlaylistHtml = `
            <a href="playlist.html" class="frame-16-iaZ">
              <div class="frame-17-5R7" style="background-image:url(${img});">
              </div>
              <div class="frame-18-dSd" style="height:20%;margin-top:15px">
                <div class="frame-19-yFb" style="height:100%;text-align:center">${title}</div>
              </div>
            </a>
            `;
        
            // Append the generated HTML to the public playlist container
            public_playlist.innerHTML += publicPlaylistHtml;
          });
        </script>

        
      </div>
    </div>

        
        
<!-- 모달 -->
<div id="myModal" style="display: none; position: fixed; top: 0; left: 0%; 
width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); justify-content: center; align-items: center; pointer-events: none;">
  <!-- 모달 내용 -->
  <div style="width: 40%; height: 50%; background-color: #fff; padding: 0.5%; border-radius: 5px; left: 0%; position: relative; pointer-events: auto;">
    <div style="width: 100%; height: 10%; flex-direction: row; display: flex;">
      <div style="width: 100%; height: 100%;">
        <p style="width: 100%; height: 100%; color: black; font-size: 4rem; text-align: center; font-style: blond; margin-top: 2%;">
          아이콘 변경
        </p>
      </div>
      <div style="width: 5%; height: 100%;">
        <span style="width: 100%; height: 100%; cursor: pointer; color: black; font-size: 3rem;" onclick="closeModal_Icon()">&times;</span>
      </div>
    </div>
    <div style="width: 100%; height: 90%; flex-direction: column; display: flex; overflow: auto">

      <div class="frame-62-SWh" style="width: 100%; height: 100%; align-items: center; flex-direction: column; display: flex;">
        <div style="width: 100%; height: 60%; align-items: center; flex-direction: row; display: flex;">
          <div style="width: 45%; height: 100%; align-items: center; flex-direction: row; display: flex;">
            <img id="currentIcon" src="img/about.jpg" alt="현재 아이콘" style="width: 90%; height: 90%; margin-left: 5%; border: solid 0.1rem rgb(0, 0, 0);">
          </div>
          <div style="width: 10%; height: 100%; align-items: center; flex-direction: row; display: flex;">
            <img id="currentIcon" src="./img/next.png" alt="우측 사진으로 변환" style="width: 100%; height: 20%">
          </div>
          <div style="width: 45%; height: 100%; align-items: center; flex-direction: row; display: flex;">
            <img class="image-show" id="image-show" src="img/about.jpg" style="width: 90%; height: 90%; margin-left: 5%; border: solid 0.1rem rgb(0, 0, 0);">
          </div>
        </div>

        <div style="width: 100%; height: 40%;">
          <form action="/main/user/update/profileImage" method="post" enctype="multipart/form-data" style="width: 100%; height: 100%; align-items: center; flex-direction: row; display: flex;">

            <div style="width: 45%; height: 100%; align-items: center; flex-direction: row; display: flex;">
              <div style="width: 50%; height: 50%; display: flex; align-items: center; justify-content: center; margin-left: 25%;">
                <label for="chooseFile" style="width: 100%; height: 100%; background-color: rgb(236, 236, 236); display: flex; align-items: center; justify-content: center; color: black; font-size: 3rem; border: solid 0.3rem rgb(0, 0, 0);">파일 선택
                  <input type="file" id="chooseFile" name="chooseFile" accept="image/*" onchange="loadFile(this)" style="width: 100%; height: 100%; display: none;">
                </label>
              </div>
            </div>

            <div style="width: 10%; height: 100%; align-items: center; display: flex; justify-content: center;"></div>

            <div style="width: 45%; height: 100%; align-items: center; display: flex; justify-content: center; ">
              <button type="button" id="submitButton" style="width: 50%; height: 50%; display: flex; align-items: center; justify-content: center; font-size: 3rem; text-align: center;" onclick="uploadImage()">
                아이콘 변경
              </button>
            </div>

          </form>
        </div>
      </div>

    </div>
  </div>
</div>
      </div>
    </div>
    <script>
      //function uploadImage() {
        // 이미지를 서버로 업로드하는 코드
        //var selectedFile = document.getElementById('chooseFile').files[0];
    
        //if (selectedFile) {
          //var formData = new FormData();
          //formData.append('image', selectedFile);
    
          // 여기에 서버로 데이터를 전송하는 AJAX 또는 fetch 코드를 추가해야 합니다.
          // 아래는 예시 코드입니다.
          //fetch('/main/user/update/profileImage', {
            //method: 'POST',
            //body: formData
          //})
          //.then(response => response.json())
          //.then(data => {
            // 서버 응답에 따른 동작 추가
            //alert("이미지를 데이터베이스에 업로드하고 창을 닫습니다.");
            //closeModal_Icon();
          //})
          //.catch(error => console.error('Error:', error));
        //} else {
          //alert("이미지를 선택하세요.");
        //}
      //}
      
      function uploadImage() {
        // 이미지를 서버로 업로드하는 코드 추가
        // 서버로 데이터를 보내어 데이터베이스에 이미지를 업로드하는 부분은 서버 구현이 필요하며, 실제 서버 구현에 따라 수정이 필요합니다.
        alert("이미지를 데이터베이스에 업로드하고 창을 닫습니다.");
        closeModal_Icon();
      }

      function loadFile(input) {
        // 파일 선택 후 미리보기
        var preview = document.getElementById('image-show');
        var file = input.files[0];
        var reader = new FileReader();
    
        reader.onload = function (e) {
          preview.src = e.target.result;
        };
    
        reader.readAsDataURL(file);
      }
    </script>

</body>
</html>